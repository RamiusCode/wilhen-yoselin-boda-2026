---
// FotoCompleta.astro
---

<section class="relative w-full h-screen overflow-hidden">
    
    <!-- Foto de esquina a esquina -->
    <div class="w-full h-full" id="contenedor-foto">
        <img
            id="foto-principal"
            src="/imagenes/foto2.webp"
            alt="Foto especial"
            class="w-full h-full object-cover object-left"
        />
    </div>

</section>

<!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
<!-- üé¨ ANIMACIONES CON GSAP                                     -->
<!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
<script>
    import { gsap } from "gsap";
    import { ScrollTrigger } from "gsap/ScrollTrigger";

    gsap.registerPlugin(ScrollTrigger);

    document.addEventListener("DOMContentLoaded", () => {
        console.log("üì∏ Iniciando animaci√≥n de foto completa...");

        // Estado inicial
        gsap.set("#foto-principal", { scale: 1.2, opacity: 0 });

        // ‚ïê‚ïê‚ïê ANIMACI√ìN ELEGANTE - Zoom out + Fade in ‚ïê‚ïê‚ïê
        ScrollTrigger.create({
            trigger: "#contenedor-foto",
            start: "top 80%",
            onEnter: () => {
                gsap.to("#foto-principal", {
                    scale: 1,
                    opacity: 1,
                    duration: 1.5,
                    ease: "power2.out",
                });
            },
            onLeaveBack: () => {
                gsap.set("#foto-principal", { scale: 1.2, opacity: 0 });
            },
        });

        // ‚ïê‚ïê‚ïê ACTIVAR SI YA EST√Å VISIBLE ‚ïê‚ïê‚ïê
        ScrollTrigger.refresh();
        const triggerElement = document.querySelector("#contenedor-foto");
        if (triggerElement) {
            const rect = triggerElement.getBoundingClientRect();
            const isInView = rect.top < window.innerHeight * 0.8;
            
            if (isInView) {
                gsap.to("#foto-principal", {
                    scale: 1,
                    opacity: 1,
                    duration: 1.5,
                    ease: "power2.out",
                });
            }
        }

        console.log("üì∏‚ú® Animaci√≥n de foto activada!");
    });
</script>

<style>
    /* Optimizaci√≥n de rendimiento */
    #foto-principal {
        backface-visibility: hidden;
        -webkit-font-smoothing: antialiased;
        -moz-osx-font-smoothing: grayscale;
    }
</style>